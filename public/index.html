<!DOCTYPE html>
<html>   
<head>
  <title>Visualização de informação</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
    <script src='https://d3js.org/d3.v5.min.js'></script> 
    <style>
        /* AXES */
/* ticks */
.axis line{
stroke: #706f6f;
stroke-width: 0.5;
shape-rendering: crispEdges;
}

/* axis contour */
.axis path {
stroke: #706f6f;
stroke-width: 0.7;
shape-rendering: crispEdges;
}

/* axis text */
.axis text {
fill: #2b2929;
font-family: Georgia;
font-size: 120%;
}

    </style>
     
 
</head>
  
<body>
  <div class="container">
    <div class="p-4">
      <h1 class="text-center">CanSat2021 - Análise de dados</h1>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" id="temp">
          <label class="form-check-label" for="flexRadioDefault1">
            Temperatura do ar (t)
          </label>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" id="press">
          <label class="form-check-label" for="flexRadioDefault1">
            Pressão atmosférica (t)
          </label>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="form-check">
          <input class="form-check-input" type="radio" name="flexRadioDefault" id="alt">
          <label class="form-check-label" for="flexRadioDefault1">
            Altitude (t)
          </label>
        </div>
      </div>
      <div class="col-sm-3">
        <label for="exampleFormControlInput1" class="form-label">Escolha o valor mínimo do tempo:</label>
        <input type="email" class="form-control" id="valmin" placeholder="valor mínimo" value="0">    
      </div>

    </div>

    <div class="shadow p-3 mb-5 bg-body rounded mt-4" id="chart"></div>
  </div>
    
  
    
</body>
  
</html>

<script >
  const margin = {
      top: 10,
      right: 20,
      bottom: 30,
      left: 30
  };
   
  // Dimensions: 400 x 400
  // used for the initial rendering
  // width to height proportion
  // its preserved as the chart is resized
  const width = 600 - margin.left - margin.right;
  const height = 300 - margin.top - margin.bottom;

  //const data = [15, 33, 20, 90, 10, 55, 60, 75, 58, 12];

  

  function convertJson(file, callback) {
    d3.json(file)
    .then(data=>{
      callback(data)
    })
    .catch(error=>{
      if (error) throw error
    })
  }

  convertJson('data.json',(data) => {
    console.log(data)
    console.log(data.length)

    const svg = d3.select('#chart').
        append('svg').
        attr('width', width + margin.left + margin.right).
        attr('height', height + margin.top + margin.bottom).
        call(responsivefy) // Call responsivefy to make the chart responsive
            .append('g').
        attr('transform', `translate(${margin.left}, ${margin.top})`);
    
    /**/
    const xScale = d3.scaleLinear().range([0,width]);
    const yScale = d3.scaleLinear().range([height, 0]);

    xScale.domain([0,800]);
    yScale.domain([0,30]);

    const yaxis = d3.axisLeft().scale(yScale); 
    const xaxis = d3.axisBottom().scale(xScale);

    svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + height + ")")
    .call(xaxis);

    svg.append("g")
    .attr("class", "axis")
    .call(yaxis);


    var line = d3.line()
      .x(d => x(d.Time))
      .y(d => y(d.temp))








    /**/
  function responsivefy(svg) {
      // Container is the DOM element, svg is appended.
      // Then we measure the container and find its
      // aspect ratio.
      const container = d3.select(svg.node().parentNode),
          width = parseInt(svg.style('width'), 10),
          height = parseInt(svg.style('height'), 10),
          aspect = width / height;
           
      // Add viewBox attribute to set the value to initial size
      // add preserveAspectRatio attribute to specify how to scale
      // and call resize so that svg resizes on page load
      svg.attr('viewBox', `0 0 ${width} ${height}`).
      attr('preserveAspectRatio', 'xMinYMid').
      call(resize);
       
      d3.select(window).on('resize.' + container.attr('id'), resize);

      function resize() {
          const targetWidth = parseInt(container.style('width'));
          svg.attr('width', targetWidth);
          svg.attr('height', Math.round(targetWidth / aspect));
      }
  }

  })
   
   
  
</script>